FORMAT: 1A

HOST: http://api.lab.mu/

# Treehole APIs
Treehole API provides services to post, update content and comments of a hole.

# Group Status
Monitor of API services.

## API Server Status [/status]
### Check API Server Alive [GET]
+ Response 200 (application/json)

        { "success": true, "message": "Here I am!" }

# Group Holes
Holes related resources of the **Treehole API**

## Holes Collection [/holes]

### List all Holes [GET]
Retrive a list of holes by sorted by method specified in parameters(time by
default). 100 at most, and 10 by default.
+ Request (application/json)

        { "number": "2" }

+ Response 200 (application/json)

        [
            {
                "id": "1",
                "user": "user1",
                "channel": "blackhole",
                "text": "Jogging in park",
                "images": ["2", "3", "4"],
                "feedback_counters": [4, 1, 2],
                "count_comments": 5,
                "count_repost": 3
            },
            {
                "id": "2",
                "user": "user2",
                "channel": "blackhole",
                "text": "Pick-up posters from post-office",
                "images": ["1", "5", "7"],
                "feedback_counters": [4, 1, 2],
                "count_comments": 5,
                "count_repost": 3
            }
        ]

+ Request (application/json)

        { "number": "101" }

+ Response 400 (application/json)

        { "message": "exceed the max number of holes can retrive" }

### Create a Hole [POST]
+ Request (application/json)

        { "user": "user3", "channel": "blackhole", "text": "Buy cheese and bread for breakfast.", "images": ["9"] }

+ Response 201 (application/json)

        { "id": "3" }

+ Request (application/json)

        { "user": "user10", "channel": "blackhole", "text": "Buy cheese and bread for breakfast.", "images": ["9"] }

+ Response 404 (application/json)

        { "message": "invalid user handle" }

+ Request (application/json)

        { "user": "user10", "channel": "nonexist", "text": "Buy cheese and bread for breakfast.", "images": ["9"] }

+ Response 404 (application/json)

        { "message": "invalid channel" }

## Hole [/holes/{id}]
A single Hole object with all its details

+ Parameters
    + id (required, string, `1`) ... String `id` of the Hole to perform action with, auto generated by MongoDB.

### Retrieve a Hole [GET]
+ Response 200 (application/json)

        {
            "id": "1",
            "user": "user1",
            "channel": "blackhole",
            "text": "Jogging in park",
            "images": ["2", "3", "4"],
            "feedback_counters": [4, 1, 2],
            "count_comments": 5,
            "count_repost": 3
        }

+ Response 404 (application/json)

        { "message": "invalid hole id" }

### Remove a Hole [DELETE]
+ Response 204

## Hole Comments [/holes/{id}/comments]
### Retrive comments of a Hole [GET]
+ Response 200 (application/json)

        [
            { "user": "user4", "text": "this is a comment" },
            { "user": "user5", "text": "this is a comment, too" },
            { "user": "user6", "text": "this is a comment, as well" }
        ]

+ Response 404 (application/json)

        { "message": "invalid hole id" }

### Post a comment under a Hole [POST]
+ Request (application/json)

        { "user": "user4", "text": "this is a comment" }

+ Response 201 (application/json)

        { "id": "3" }

+ Request (application/json)

        { "user": "user5", "text": "this is a comment" }

+ Response 404 (application/json)

        { "message": "invalid user handle" }

+ Request (application/json)

        { "user": "user5", "text": "this is a comment" }

+ Response 404 (application/json)

        { "message": "invalid hole id" }

### Remove a comments [DELETE]
+ Response 204


# Group Images
Images related resources of the **Treehole API**

## Images Collection [/image]
Service for upload and host images.

### Add a New Image [POST]

+ Response 201 (application/json)

        { "id": "3" }

## Image [/image/{id}]

+ Parameters
    + id (required, string, `1`)

### Get an Existing Image [GET]

+ Response 200 (application/json)

        { "url": "/img/3.jpg" }

+ Response 404 (application/json)

        { "message": "invalid image id" }

# Group Users
Users related resources of the **Treehole API**

## Users Collection [/users]

### Create a User [POST]
+ Request (application/json)

        { "handle": "user" }

+ Response 201 (application/json)

        { "id": "3" }

+ Request (application/json)

        { "handle": "user5" }

+ Response 400 (application/json)

        { "message": "handle already exists" }

## User [/users/{handle}]

+ Parameters
    + handle (required, string, `user1`) ... Handle of the User to perform action with.
    
+ Model (application/json)

        {
            "id": "1",
            "handle": "user1"
        }

### Retrieve a User [GET]
+ Response 200 (application/json)

        {
            "id": "1",
            "handle": "user1"
        }

## User's Holes [/users/{handle}/holes]
### Retrive holes of a User [GET]

+ Response 200 (application/json)

        [
            {
                "id": "1",
                "user": "user1",
                "channel": "blackhole",
                "text": "Jogging in park",
                "images": ["2", "3", "4"],
                "feedback_counters": [4, 1, 2],
                "count_comments": 5,
                "count_repost": 3
            },
            {
                "id": "2",
                "user": "user1",
                "channel": "blackhole",
                "text": "Pick-up posters from post-office",
                "images": ["1", "5", "7"],
                "feedback_counters": [4, 1, 2],
                "count_comments": 5,
                "count_repost": 3
            }
        ]

+ Response 404 (application/json)

        { "message": "invalid user handle" }

#Group Channels

Channels related resources of the **Treehole API**

## Channels Collection [/channels]



